
![N-100 logo](assets/preload/images/KadeEngineLogo.png)

[![Discord](https://img.shields.io/discord/808039740464300104?label=discord)](https://discord.gg/xN4AYkQZ4r) [![GitHub issues](https://img.shields.io/github/issues/KadeDev/Kade-Engine)](https://github.com/Trinichrys/Friday-Night-Funkin-N-100-Mod-SC-Master/issues) [![GitHub pull requests](https://img.shields.io/github/issues-pr/KadeDev/Kade-Engine)](https://github.com/Trinichrys/Friday-Night-Funkin-N-100-Mod-SC-Master/pulls) ![GitHub](https://img.shields.io/github/license/KadeDev/Kade-Engine)

# Friday Night Funkin': N-100 Mod
## Friday Night Funkin'
**Friday Night Funkin'** is a rhythm game originally made for Ludum Dare 47 "Stuck In a Loop".

Links: **[itch.io page](https://ninja-muffin24.itch.io/funkin) ⋅ [Newgrounds](https://www.newgrounds.com/portal/view/770371) ⋅ [source code on GitHub](https://github.com/ninjamuffin99/Funkin)**
> Uh oh! Your tryin to kiss ur hot girlfriend, but her MEAN and EVIL dad is trying to KILL you! He's an ex-rockstar, the only way to get to his heart? The power of music... 

## Friday Night Funkin': N-100 Mod
**Friday Night Funkin': N-100 Mod** is a mod for Friday Night Funkin', bringing a full, flashy and neon style to the original game, replacing almost all of the game's assets to give you a whole new perspective of Friday Night Funkin'.

Links: **[GameBanana mod page](https://gamebanana.com/gamefiles/17766)**

**REMEMBER**: This is a **mod**. This is not the vanilla game and should be treated as a **modification**. This is not and probably will never be official, so don't get confused.

## Kade Engine
**Kade Engine** is a mod for Friday Night Funkin', including a full engine rework, replays, and more.

Links: **[GameBanana mod page](https://gamebanana.com/gamefiles/16761) ⋅ [play in browser](https://funkin.puyo.xyz) ⋅ [latest stable release](https://github.com/KadeDev/Kade-Engine/releases/latest) ⋅ [latest development build (windows)](https://ci.appveyor.com/project/KadeDev/kade-engine-windows/branch/master/artifacts) ⋅ [latest development build (macOS)](https://ci.appveyor.com/project/KadeDev/kade-engine-macos/branch/master/artifacts) ⋅ [latest development build (linux)](https://ci.appveyor.com/project/KadeDev/kade-engine-linux/branch/master/artifacts)**

**REMEMBER**: This is a **mod**. This is not the vanilla game and should be treated as a **modification**. This is not and probably will never be official, so don't get confused.

## Website ([KadeDev.github.io/kade-engine/](https://KadeDev.github.io/Kade-Engine/))
If you're looking for documentation, changelogs, or guides, you can find those on the Kade Engine website.

# Previews ([skip](#features))

![Philly Nice (Hard) on Downscroll](https://cdn.discordapp.com/attachments/847017690891550740/857708746562076672/2021-06-24_3.png)

![High (Hard) on Upscroll](https://cdn.discordapp.com/attachments/847017690891550740/857708720905519124/2021-06-24_2.png)

![Free Play selection screen](https://cdn.discordapp.com/attachments/847017690891550740/857708761412927538/2021-06-24.png)

![Options Menu](https://cdn.discordapp.com/attachments/847017690891550740/857708782120337458/2021-06-24_4.png)

![raid shadow legtdnehbdgds](https://user-images.githubusercontent.com/81063954/124009877-1da6b900-d9ac-11eb-8df6-066895a1749d.gif)

# Kade Engine Features

 - **New Input System**
	 - An improved input system, similar to Quaver or Etterna, with less delays, less dropped inputs and other improvements.
 - **More gameplay information**
	 - While you're playing, we show you information about how you're doing, such as your accuracy, combo break (miss) count, notes per second, and your grade/rating.
 - **Customizable keybinds**
	 - Instead of being forced to use WASD and the arrow keys, you can customize the keybinds to any keys you want!
 - **Replays** (in beta)
	 - Have you ever gotten a crazy score but didn't record? The replay system solves that: it automatically saves a "replay" of your gameplay every time you complete a song, which you can play back inside of the game. 
	 - Replays just store information about what you're doing, they don't actually record the screen -- so they take up way less space on your disk than videos.
 - **Audio offset**
	 - If your headphones are delayed, you can set an offset in the options menu to line the game up with the delay and play with synced audio like intended.

# Credits
### Friday Night Funkin'
- [ninjamuffin99](https://twitter.com/ninja_muffin99) - Programming
- [PhantomArcade3K](https://twitter.com/phantomarcade3k) - Animation
- [Evilsk8r](https://twitter.com/evilsk8r) - Art
- [KawaiSprite](https://twitter.com/kawaisprite) - Music

### Friday Night Funkin': N-100 Mod
- [Trinichrys](https://instagram.com/trinichrys) - Mod Creator, Sprites, Music, Programming
- [Rozological](https://instagram.com/rozological) - Lead Programmer/Programming, Sprites
- [nnixis](https://instagram.com/nnixis) - Sprites Management, Art, Animation
- [Labrrxnth](https://instagram.com/julian_nrnjo) - Mod Management/Maintainer, Art
- [TMM Niko](https://instagram.com/tmm_niko) - Music Sidelines, N-100 OST Record Label Enforcer (ENVYVERSE Records)
- [CyberTheBlade](https://twitter.com/CyberTheblade) - Music, Charts

### Kade Engine
- [KadeDeveloper](https://twitter.com/KadeDeveloper) - Maintainer and lead programmer
- [The contributors](https://github.com/KadeDev/Kade-Engine/graphs/contributors)

This game was made with love to Newgrounds and its community. Extra love to Tom Fulp.

### Kade Engine Shoutouts
- [GWebDev](https://github.com/GrowtopiaFli) - Video Code
- [Rozebud](https://github.com/ThatRozebudDude) - Ideas (that I stole)
- [Puyo](https://github.com/daniel11420) - Setting up appveyor and a lot of other help

## N-100 GitHub/Source Details
**Please note** that most/some information are pulled from [Kade Engine's GitHub](https://github.com/KadeDev/Kade-Engine), like AppVeyors, features, credits, etc. Compiling details are the same as is, *N-100's Kade Engine* is just our modified/custom version/build of Kade Engine, thus compiling is no different. ".FLA (flash files)" are missing due to errors with VSC not pushing staged changes correctly and Animate not saving the FLAs.. You'll have to get your FLA files elsewhere, but for N-100 they are unavailable for the time being and will probably make an appearance in future N-100 versions. *README.md* may constantly be receiving changes to add, remove or change information. If you notice any problems regarding **N-100** *(for instance, game, source, engine, etc)*, please contact me [here](https://instagram.com/trinichrys), or **@trinichrys** on *Instagram*

## Dev Notes/Development Info
This mod was made and managed all by Trinichrys, Rozological, Labrxxnth and nnixis using multiple applications such as [MS Visual Studio Code](https://code.visualstudio.com/) for programming n' stuff, [Adobe Animate CC](https://www.adobe.com/products/animate.html) for re-animating characters and other assets (soon, maybe..), also that and [Krita](https://krita.org/en/) and [PicsArt](https://picsart.com/?utm_source=google&utm_medium=ppc&utm_campaign=13463806978&adgroupid=122958157866&utm_term=&gclid=CjwKCAjwzruGBhBAEiwAUqMR8G5saKRZ9yl604pnGAL1mOheiBcwmHwn4MNhX2epgi-CT2zMuUK6PxoCrLoQAvD_BwE) for recoloring, 10/10 for both, love both, need both, love love love. OH AND I ALSO USED THIS [HEX COLOR PICKER](https://imagecolorpicker.com/) CUS I NEEDED IT TO GET THE COLORS FROM THE SPRITES INTO ADOBE ANIMATE LOL! [GarageBand](https://www.apple.com/mac/garageband/) ([heres the mobile one which is exactly the one i used](https://apps.apple.com/us/app/garageband/id408709785)) to remix the OST (very badly lol), I love it too much.. even over FLS. (never tried so can't assume yet).. don't slander me........ The source code finally thrown up on [GITHUB](https://github.com/Trinichrys/Friday-Night-Funkin-N-100-Mod-SC-Master) (this current page lol), WOWZERS.. Go check it out., and also the source code does NOT have the ".fla" files, explained in source details, but they will be soon enough. The whole OST has been uploaded onto [SoundCloud](https://soundcloud.com/envy529/sets/fnf-n-100-beta-mod-ost) ([YouTube](https://www.youtube.com/channel/UCzKYQzsylnZybZgnyVOWPvQ) soon, looking for more platforms), so go check it out, sometimes SoundCloud receives the new music first THEN the mod receives it, sometimes other way 'round.. idk man.. and sometimes we forget to do patch notes in readme file.. cry. Shoutouts to uh my dog, Lulu.. to [Newgrounds](https://www.newgrounds.com/), always [Newgrounds](https://trinichrys.newgrounds.com/), forever [Newgrounds](https://trinichrys.newgrounds.com/), shoutouts to my mother and father, hi parents, shoutouts toooooooo [BIDDLE3](https://twitter.com/TheBiddleMoment), AFTER SEEING [B3 MOD](https://gamebanana.com/mods/42734) I WANTED TO MAKE [N-100](https://gamebanana.com/mods/44357) AND NEVER WOULD OF KNEW THE JOY OF MOD MAKING IF IT WEREN'T FOR THEM, LOVE [BIDDLE3](https://twitter.com/TheBiddleMoment)!!!!!! Yeah, that's pretty much it, I'm going to bed now.

# Building Friday Night Funkin': Kade Engine

**Please note** that these instructions are for compiling/building the game. If you just want to play Kade Engine, **play in your browser or download a build instead**: **[play in browser](https://funkin.puyo.xyz) ⋅ [latest stable release](https://github.com/KadeDev/Kade-Engine/releases/latest) ⋅ [latest development build (windows)](https://ci.appveyor.com/project/KadeDev/kade-engine-windows/build/artifacts) ⋅ [latest development build (macOS)](https://ci.appveyor.com/project/daniel11420/kade-engine-macos/build/artifacts) ⋅ [latest development build (linux)](https://ci.appveyor.com/project/daniel11420/kade-engine-linux/build/artifacts)**. If you want to build the game yourself, continue reading.

**Also note**: you should be familiar with the commandline. If not, read this [quick guide by ninjamuffin](https://ninjamuffin99.newgrounds.com/news/post/1090480).

**Also also note**: To build for *Windows*, you need to be on *Windows*. To build for *Linux*, you need to be on *Linux*. Same goes for macOS. You can build for html5/browsers on any platform.

## Dependencies
 1. [Install Haxe 4.1.5](https://haxe.org/download/version/4.1.5/). You should use 4.1.5 instead of the latest version because the latest version has some problems with Friday Night Funkin': Kade Engine.
 2. After installing Haxe, [Install HaxeFlixel](https://haxeflixel.com/documentation/install-haxeflixel/).
 3. Install `git`.
	 - Windows: install from the [git-scm](https://git-scm.com/downloads) website.
	 - Linux: install the `git` package: `sudo apt install git` (ubuntu), `sudo pacman -S git` (arch), etc... (you probably already have it)
 4. Install and set up the necessary libraries:
	 - `haxelib install lime 7.9.0`
	 - `haxelib install openfl`
		- `haxelib install actuate`
	 - `haxelib install flixel`
	 - `haxelib install flixel-tools`
	 - `haxelib install flixel-addons`
	 - `haxelib install flixel-ui`
	 - `haxelib install hscript`
	 - `haxelib install newgrounds`
	 - `haxelib install linc_luajit`
		- `haxelib run flixel-tools setup`
	 - `haxelib run lime setup`
	 - `haxelib run lime setup flixel`
	 - `haxelib git faxe https://github.com/Trinichrys/faxe`
	 - `haxelib git polymod https://github.com/Trinichrys/polymod.git`
	 - `haxelib git discord_rpc https://github.com/Trinichrys/linc_discord-rpc`
	 - `haxelib git extension-webm https://github.com/Trinichrys/extension-webm`
	 - `lime rebuild extension-webm windows`

### Windows-only dependencies (only for building *to* Windows. Building html5 on Windows does not require this)
If you are planning to build for Windows, you also need to install **Visual Studio 2019**. While installing it, *don't click on any of the options to install workloads*. Instead, go to the **individual components** tab and choose the following:

-   MSVC v142 - VS 2019 C++ x64/x86 build tools
-   Windows SDK (10.0.17763.0)
-   C++ Profiling tools
-   C++ CMake tools for windows
-   C++ ATL for v142 build tools (x86 & x64)
-   C++ MFC for v142 build tools (x86 & x64)
-   C++/CLI support for v142 build tools (14.21)
-   C++ Modules for v142 build tools (x64/x86)
-   Clang Compiler for Windows
-   Windows 10 SDK (10.0.17134.0)
-   Windows 10 SDK (10.0.16299.0)
-   MSVC v141 - VS 2017 C++ x64/x86 build tools
-   MSVC v140 - VS 2015 C++ build tools (v14.00)

This will install about 22 GB of crap, but is necessary to build for Windows.

### macOS-only dependencies (these are required for building on macOS at all, including html5.)
If you are running macOS, you'll need to install Xcode. You can download it from the macOS App Store or from the [Xcode website](https://developer.apple.com/xcode/).

If you get an error telling you that you need a newer macOS version, you need to download an older version of Xcode from the [More Software Downloads](https://developer.apple.com/download/more/) section of the Apple Developer website. (You can check which version of Xcode you need for your macOS version on [Wikipedia's comparison table (in the `min macOS to run` column)](https://en.wikipedia.org/wiki/Xcode#Version_comparison_table).)

## Cloning the repository
Since you already installed `git` in a previous step, we'll use it to clone the repository.
1. `cd` to where you want to store the source code (i.e. `C:\Users\username\Desktop` or `~/Desktop`)
2. `git clone https://github.com/KadeDev/Kade-Engine.git`
3. `cd` into the source code: `cd Kade-Engine`
4. (optional) If you want to build a specific version of Kade Engine, you can use `git checkout` to switch to it (i.e. `git checkout 1.4-KE`) (remember that versions 1.4 and older cannot build to Linux or HTML5)
- You should **not** do this if you are planning to contribute, as you should always be developing on the latest version.

## Building
Finally, we are ready to build.

- Run `lime build <target>`, replacing `<target>` with the platform you want to build to (`windows`, `mac`, `linux`, `html5`) (i.e. `lime build windows`)
- The build will be in `Kade-Engine/export/<target>/bin`, with `<target>` being the target you built to in the previous step. (i.e. `Kade-Engine/export/windows/bin`)
- Only the `bin` folder is necessary to run the game. The other ones in `export/<target>` are not.


# GWebDev FNF Video (WEBM) Code
This is GWebDev's research on how to play videos in openfl haxeflixel (webm only supported)
# How To Setup
BEFORE SETUP apologies to benlonghair the war has ended ok so \
(btw this is for `Friday Night Funkin`)
1. Download the Friday Night Funkin source code in https://github.com/ninjamuffin99/Funkin and follow `EVERYTHING` (including the git part which is very important) (make sure its the new file system otherwise you need to put extra code `which i have the solution for lol`)
2. Install actuate by doing `haxelib install actuate`
3. Install the extension-webm fork by doing `haxelib git extension-webm https://github.com/GrowtopiaFli/extension-webm`
4. It won't work lol so type the command `lime rebuild extension-webm [windows/mac/linux]` (depends on your device)
(sry idk how to fix this for mac)
5. Download the zip of this repository and copy paste the files inside the `source` folder to your fnf source code's `source` folder
6. Edit the `Main.hx` file in the fnf source code \
Then add after the code
```js
addChild(new FlxGame(gameWidth, gameHeight, initialState, zoom, updateframerate, drawframerate, skipSplash, startFullscreen));
```
And before code
```js
#if !mobile
addChild(new FPS(10, 3, 0xFFFFFF));
#end
```
The code
```js
var ourSource:String = "assets/videos/DO NOT DELETE OR GAME WILL CRASH/dontDelete.webm";

#if web
var str1:String = "HTML CRAP";
var vHandler = new VideoHandler();
vHandler.init1();
vHandler.video.name = str1;
addChild(vHandler.video);
vHandler.init2();
GlobalVideo.setVid(vHandler);
vHandler.source(ourSource);
#elseif desktop
var str1:String = "WEBM SHIT"; 
var webmHandle = new WebmHandler();
webmHandle.source(ourSource);
webmHandle.makePlayer();
webmHandle.webm.name = str1;
addChild(webmHandle.webm);
GlobalVideo.setWebm(webmHandle);
#end
```
So it would look something like
```js
addChild(new FlxGame(gameWidth, gameHeight, initialState, zoom, updateframerate, drawframerate, skipSplash, startFullscreen));
		
var ourSource:String = "assets/videos/DO NOT DELETE OR GAME WILL CRASH/dontDelete.webm";
		
#if web
var str1:String = "HTML CRAP";
var vHandler = new VideoHandler();
vHandler.init1();
vHandler.video.name = str1;
addChild(vHandler.video);
vHandler.init2();
GlobalVideo.setVid(vHandler);
vHandler.source(ourSource);
#elseif desktop
var str1:String = "WEBM SHIT"; 
var webmHandle = new WebmHandler();
webmHandle.source(ourSource);
webmHandle.makePlayer();
webmHandle.webm.name = str1;
addChild(webmHandle.webm);
GlobalVideo.setWebm(webmHandle);
#end

#if !mobile
addChild(new FPS(10, 3, 0xFFFFFF));
#end
```
# Setting up `Project.xml`
1. Edit `Project.xml` in the fnf source code
2. Find the section with `<haxelib name="etc" />`
3. Add these two extra lines
```xml
<haxelib name="actuate" />
<haxelib name="extension-webm" if="desktop" />
```
4. `FOLLOW THIS 4TH STEP ONLY IF YOUR USING THE OLD FILE SYSTEM`
In the section with `<assets path="bla">` \
Add these two lines
```xml
<assets path="assets/videos" include="*.mp3" if="web"/>
<assets path="assets/videos" include="*.ogg" unless="web"/>
```
5. If your in the new file system \
Create a new folder named `videos` inside assets/preload \
If your in the old file system \
Create a new folder named `videos` inside assets
6. Paste the `DO NOT DELETE OR GAME WILL CRASH` folder inside the videos folder (either assets/preload/videos or assets/videos `SOURCE CODE SPECIFIC`) if you don't you know what happens, game crashes.
# Setting up the desktop build
For all you windows users out there
You need to do an extra step
You must know how to use cmd or `Command Prompt` or `Terminal` for mac or something idk i don't have a mac \
(sorry but this is only for `64 bit` architectures)
1. Download ffmpeg
https://github.com/BtbN/FFmpeg-Builds/releases (please download the gpl shared version there is also download for mac please download ffprobe: https://evermeet.cx/ffmpeg)
2. Extract the zip file to your choice
3. Go inside the `bin` folder inside the extracted zip file
4. Open `Command Prompt`
5. Change directory inside the `bin` folder
6. `More on this later`
# Understanding of how video works
As you know, this only supports `webm` video files not `mp4` or `any other file type` \
The reasoning of this is because of the different types of codecs not embedded inside openfl \
Let me give an explanation \
`Video Files` require a `codec` \
a codec is an `encoder` or a `decoder` for video files \
You `CANNOT` compress video files to a smaller size in modern times because they are already `COMPRESSED` and that is why we have `codecs` so you can't push the limit \
OpenFL has no codec embedded into it that's why someone who made `openfl-webm` coded the webm codec from scratch using `c++` for haxe/openfl \
But if you will ask `Why does it work for html?` \
It's because when it comes to html the `BROWSER` has the codec \
If you were to do it Natively `Native means an application that uses the system's commands instead of depending on other software like browsers which is for html5`, there are no codecs built into it. \
Now if you were to ask `Why is it named extension-webm if it was openfl-webm then?` It's because `openfl-webm` is ancient and broken so someone made `extension-webm` to fix it: https://github.com/HaxeExtension/extension-webm \
Now if you were to ask `Then why did i install https://github.com/GrowtopiaFli/extension-webm instead of https://github.com/HaxeExtension/extension-webm then?` It's because i added some extra code in `WebmPlayer.hx` to fix memory leaks. \
Now if you were to ask `What are memory leaks?` well a memory leak is a thing wherein the memory is stuffed and not freed, in basic terms, your `RAM` processes more data. \
Why you ask? it's because the video isn't being replaced but keep being added each time. \
How did i fix this issue you asked? i added extra code to `WebmPlayer.hx` which allows you to change the `SOURCE VIDEO` of the webm player anytime.
# Solution for the desktop build
Now how will we setup the video on desktop? \
Well in webm player there is `NO` audio support because it's broken lol so now we are in trouble but do not worry because ffmpeg is here to save us. \
My solution is to `Audio Sync` a way of Synchronizing the audio version of the video to the video `You must have an ogg file either just the video's audio or just empty audio that lasts as long as the video's time (i made a solution so if you don't have audio on your video then just don't make an ogg file)`. \
So back to that ffmpeg change directory folder is a ffprobe command template i have
```cmd
ffprobe -v error -count_frames -select_streams v:0 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 "yourvideo.mp4"
```
Ok so my recommendation is to Convert your video to webm then convert that webm to an mp4 because sometimes there are frame losses to webm files which fails the `Audio Sync`. \
This command logs the number of frames your video has and now you may ask. \
`If i have to convert webm to an mp4 because of frame loss for ffprobe why the hell can't i just input the webm file?` Well it's because ffprobe cannot detect the frame numbers in your webm files so you have to use a different format. \
Now you may ask `What am i suppose to do with the frame numbers?` You have to make your video name first. \
Let me give a video name sample of `video`. \
Now inside the videos folder in either `assets/preload/videos` or `assets/videos` `(SOURCE CODE SPECIFIC)` if the video name is `video` then make a file called `video.txt` and put the frame numbers there as easy as that. \
2. put your webm file in so it will be `video.webm` \
3. put the ogg converted file in so it will be `video.ogg` \
`IMPORTANT NOTE THAT THERE ARE DIFFERENT CODECS FOR WEBM FILES THE SPECIFIC ONE IS VP8 WHILE VP9 AND OTHERS AREN'T SUPPORTED`
# Usage of the player
You can edit `VideoState.hx` all you want but the usage of the `VideoState` class is pretty simple. \
The return must be a new class but i made a separate `VideoState.hx` file inside the `function` folder in this repository to change the callback to a function.
```js
FlxG.switchState(new VideoState('assets/videos/yoursourcevideo.webm', new YourClass(), your frameskip limit which you can leave blank or put a frameskip limit you can fill this parameter voluntarily and it must be an integer not a decimal, [true/false] (if it is true, the music playing will automatically be paused, this is good for midway videos while playing or idk for pausing the game and showing the video cutscene)));
```
YourClass is your callback class which is called once the video ends so you put your own logic idk \
Frameskip limit should be an integer not a decimal \
enter true or false for music auto pause and resume \
WARNING WARNING! function is very unstable and won't work do not copy the contents of the `function` folder please and also you make your own class with code or something idk i won't be your coding teacher ask kadedev or something idk
# End of the document
Thank you for taking your time to read the entire repository ReadMe file. \
This is the end of the document. I hope you understood with us on everything, and I hope you enjoy our mod. <3
Support the kickstarter here: https://www.kickstarter.com/projects/funkin/friday-night-funkin-the-full-ass-game